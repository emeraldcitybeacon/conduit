{% load i18n component_tags %}
<form
  id="contacts-form"
  data-resource-form
  hx-patch="{% url 'resources:resource-detail' resource.service.id %}"
  hx-target="this"
  hx-swap="none"
  class="space-y-4"
  role="region"
  aria-labelledby="contacts-heading"
>
  {% csrf_token %}
  <h2 id="contacts-heading" class="sr-only">{% trans "Contacts" %}</h2>
    <div class="flex items-center gap-2">
      {% component 'form_field' name='service.url' label=_('Website') value=resource.service.url %}{% endcomponent %}
      <span class="merge-chip-container" data-field="service.url"></span>
      {% with events=resource.verifications.service.url %}
      {% if events %}
        {% component 'freshness_badge' status=events.0.verified_at|timesince %}{% endcomponent %}
        {% component 'freshness_popover' events=events %}{% endcomponent %}
      {% else %}
        {% component 'freshness_badge' status=_('unverified') %}{% endcomponent %}
      {% endif %}
    {% endwith %}
    <div class="join">
      {% component 'verify_button' label=_('Called') method='called' field_path='service.url' resource_id=resource.service.id %}{% endcomponent %}
      {% component 'verify_button' label=_('Website') method='website' field_path='service.url' resource_id=resource.service.id %}{% endcomponent %}
      {% component 'verify_button' label=_('On-site') method='onsite' field_path='service.url' resource_id=resource.service.id %}{% endcomponent %}
    </div>
  </div>
  {% component 'validator' field='service.url' %}{% endcomponent %}

    <div class="flex items-center gap-2">
      {% component 'form_field' name='service.email' label=_('Email') value=resource.service.email %}{% endcomponent %}
      <span class="merge-chip-container" data-field="service.email"></span>
      {% with events=resource.verifications.service.email %}
      {% if events %}
        {% component 'freshness_badge' status=events.0.verified_at|timesince %}{% endcomponent %}
        {% component 'freshness_popover' events=events %}{% endcomponent %}
      {% else %}
        {% component 'freshness_badge' status=_('unverified') %}{% endcomponent %}
      {% endif %}
    {% endwith %}
    <div class="join">
      {% component 'verify_button' label=_('Called') method='called' field_path='service.email' resource_id=resource.service.id %}{% endcomponent %}
      {% component 'verify_button' label=_('Website') method='website' field_path='service.email' resource_id=resource.service.id %}{% endcomponent %}
      {% component 'verify_button' label=_('On-site') method='onsite' field_path='service.email' resource_id=resource.service.id %}{% endcomponent %}
    </div>
  </div>
  {% component 'validator' field='service.email' %}{% endcomponent %}

  <button type="submit" class="hidden">{% trans "Save" %}</button>
</form>
